function loadData(e,t){(e=e||Object.keys(OPEN_COVID_CONFIG.tables)).forEach((e=>function(e,a){const r=Math.round(Date.now()/1e3/60),o=`${OPEN_COVID_CONFIG["data-url"]}/v2/${a}`;$.getJSON(`${o}?cache=${r}`,(a=>t(e,a)))}(e,e+".json")))}function tableToRecords(e){return e.data.map((t=>e.columns.reduce(((e,a,r)=>Object.assign(e,{[a]:t[r]})),{})))}function removeEmptyColumns(e){const t=[];return e.forEach((e=>{Object.keys(e).forEach((a=>{e[a]&&t.push(a)}))})),e.map((e=>t.reduce(((t,a)=>Object.assign(t,{[a]:e[a]})),{})))}function retryCallback(e){let t=0;const a=setInterval((()=>{try{e(),clearInterval(a)}catch(e){console.error("Callback failed: "+ ++t,e),t>=32&&clearInterval(a)}}),250)}async function loadResource(e){const t=await fetch(e);if(t.ok)return t;throw new Error("Response failed")}function loadCSV(e,t=!1){return e in CACHE.CSV||(CACHE.CSV[e]=new Promise((async(a,r)=>{t&&(e="https://cors-anywhere.herokuapp.com/"+e);const o=await loadResource(e),n=await o.text();Papa.parse(n,{header:!0,skipEmptyLines:!0,complete:e=>{e.errors.length>0?r(e.errors[0]):a(e.data)}})}))),CACHE.CSV[e]}function recordsToDataTable(e,t=null){const a=[t=t||Object.keys(e[0])].concat(e.map((e=>t.map((t=>e[t])))));return google.visualization.arrayToDataTable(a)}function loadGoogleCharts(e=["corechart"]){const t=e.join(",");return t in CACHE.gcharts||(CACHE.gcharts[t]=google.charts.load("current",{packages:e})),CACHE.gcharts[t]}function filterDataIndices(e){let t=e.map(((e,t)=>Object.assign({},e,{idx:t})));if(CURRENT_OPTIONS["skip-until-outbreak"]){const a=CURRENT_OPTIONS["outbreak-threshold-ratio"],r=Math.max(...e.filter((e=>e.date<"2020-06-01")).map((e=>e.new_confirmed))),o=e.map(((e,t)=>(Number(e.new_confirmed)||0)/a>r?t:null)).filter((e=>e))[0];t=t.slice(o)}const a=["new_confirmed","new_deceased"];for(;a.every((e=>""===t.slice(-1)[0][e]));)t.pop();return"ontouchstart"in document.documentElement&&(t=t.slice(-CURRENT_OPTIONS["history-size-mobile"])),t.map((e=>e.idx))}function mapToPositiveNumeric(e,t){return e.map((e=>{const a=Object.assign({},e);return t.forEach((e=>a[e]=Math.max(0,Number(a[e]))||0)),a}))}