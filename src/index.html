<!DOCTYPE html>
<html>

<!-- HTML page head -->
<script src="templates/head.tpl.html" data-include data-vars='{"root": "."}'></script>

<body>

    <!-- Map section -->
    <div id="vmap"></div>

    <!-- Search bar -->
    <div style="position: absolute; top: 0; width: 100%; padding: 2em 4em;">
        <script src="templates/searchbar.tpl.html" data-include data-vars='{"url-prefix": "report/"}'></script>
    </div>

    <!-- Setup map data -->
    <script>

        $('#vmap').vectorMap({
            map: 'world_en',
            // values: infectionRate,
            selectedColor: null,
            backgroundColor: '#424242',
            scaleColors: ['#FFFFFF', '#FFFFFF'],
            normalizeFunction: null,
            onRegionSelect: (event, code, region) => {
                code = code.toUpperCase();

                // If this is a touch input device, ask for confirmation
                if ('ontouchstart' in window && !confirm(`See data for ${code}?`)) return

                window.location = `report/?key=${code}`;
            }
        });
    </script>

    <!-- Information button -->
    <a id="vmap-help" href="about">?</a>

    <!-- Title -->
    <a id="vmap-title" href="about">{{name}}</a>

    <!-- Load analytics at the end of the page -->
    <script src="templates/analytics.tpl.html" data-include></script>
</body>

</html>